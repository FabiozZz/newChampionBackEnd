import React, { useEffect, useState } from 'react'
import classes from './side.module.css';
import cn from 'classnames';
import { NavLink, useHistory, useRouteMatch } from 'react-router-dom';
import { useDispatch } from 'react-redux';
import Api from '../../Api/Api';
import { log_out } from '../../Acnions/userActions';
import { CustomLink } from '../../utils/CustomLink/CustomLink';

export const SideBar = () => {
    const dispatch = useDispatch();
    const history = useHistory();
    const handleExitCRM = () => {
        Api.logout();
        dispatch(log_out());
        history.push('/');
    };
    const route = useRouteMatch(history.location.pathname);

    return (
        <div className={classes.wrapper}>
            <CustomLink route={route.path} to={'/'} className={classes.logo} >
                <div className={classes.logo_img} />
            </CustomLink>
            <CustomLink route={route.path} exact to={'/'} activeClassName={classes.active_link} className={cn(classes.home, classes.link)}>
                <svg className={classes.home_svg} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clipPath="url(#clip0)"><path d="M15.999 2.10247e-05C15.991 -3.50412e-05 15.9831 2.10247e-05 15.9751 0.000189223C15.4298 -0.0091738 14.9801 0.425338 14.9708 0.970635C14.9707 0.980896 14.9707 0.991156 14.9708 1.00142V3.30808H16.9892V1.00142C16.9922 0.451464 16.5489 0.00316072 15.999 2.10247e-05Z" fill="#69707F" /><path d="M18.3526 2.46704H17.8865V3.76901C17.8913 4.0051 17.7037 4.20038 17.4676 4.20509C17.4618 4.2052 17.4562 4.2052 17.4505 4.20509H14.5002C14.2685 4.2089 14.0776 4.02427 14.0738 3.79261C14.0737 3.78476 14.0737 3.77685 14.0741 3.76901V2.46704H6.44908V3.76901C6.44146 4.01687 6.23474 4.21193 5.98682 4.20509H3.03663C2.79111 4.21142 2.58698 4.0176 2.58059 3.77209C2.58059 3.77108 2.58053 3.77001 2.58053 3.76901V2.46704H2.16256C1.15382 2.47214 0.338563 3.29099 0.337891 4.29973V6.22346H20.1853V4.29973C20.1809 3.28942 19.3629 2.47147 18.3526 2.46704Z" fill="#69707F" /><path d="M4.51271 0.00012207C3.94661 0.00012207 3.47852 0.435362 3.47852 1.00135V3.30802H5.55295V1.00135C5.55295 0.435362 5.07875 0.00012207 4.51271 0.00012207Z" fill="#69707F" /><path d="M0.337891 7.12048V19.3941C0.337891 20.3999 1.15645 21.2491 2.16256 21.2491H10.4733C9.76645 20.0628 9.39216 18.7081 9.38969 17.3272C9.38969 13.1447 12.7945 9.72654 16.9769 9.72654C18.0851 9.72923 19.1797 9.97183 20.1853 10.4376V7.12048H0.337891Z" fill="#69707F" /><path d="M16.9732 10.6237C13.2794 10.6237 10.2851 13.6181 10.2852 17.3119C10.2852 21.0057 13.2796 24.0001 16.9734 24C20.6672 23.9999 23.6615 21.0056 23.6615 17.3118C23.6573 13.6197 20.6653 10.6278 16.9732 10.6237ZM19.6145 18.3337H16.6081C16.3562 18.3292 16.1532 18.1259 16.149 17.874V13.9404C16.149 13.6927 16.3499 13.4919 16.5976 13.4919C16.8453 13.4919 17.0461 13.6927 17.0461 13.9404V17.4367H19.6145C19.8622 17.4367 20.063 17.6375 20.063 17.8852C20.063 18.1329 19.8622 18.3337 19.6145 18.3337Z" fill="#69707F" /></g><defs><clipPath id="clip0"><rect width="24" height="24" fill="white" /></clipPath></defs></svg>
                <div className={cn(classes.home_text, classes.link_text)}>Главная</div>
            </CustomLink>
            <CustomLink route={route.path} to={'/reports'} activeClassName={classes.active_link} className={cn(classes.reports, classes.link)}>
                <svg className={classes.reports_svg} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M12 21.0001C7.02944 21.0001 3 16.9706 3 12.0001C3 7.75244 5.94256 4.1459 9.90041 3.19242C10.4796 3.05288 11 3.52091 11 4.11669V11.0001C11 12.1046 11.8954 13.0001 13 13.0001H19.8834C20.4792 13.0001 20.9472 13.5204 20.8076 14.0997C19.8542 18.0575 16.2476 21.0001 12 21.0001ZM15 4.00006V9.00006H20C19.6667 7.33339 18.2 4.00006 15 4.00006Z" fill="#69707F" /><path d="M9.90041 3.19242L10.1346 4.16461L10.1346 4.16461L9.90041 3.19242ZM20.8076 14.0997L21.7798 14.3339V14.3339L20.8076 14.0997ZM15 9.00006H14C14 9.55234 14.4477 10.0001 15 10.0001V9.00006ZM15 4.00006V3.00006C14.4477 3.00006 14 3.44777 14 4.00006H15ZM20 9.00006V10.0001C20.2996 10.0001 20.5834 9.86574 20.7733 9.63405C20.9633 9.40236 21.0393 9.09772 20.9806 8.80394L20 9.00006ZM2 12.0001C2 17.5229 6.47715 22.0001 12 22.0001V20.0001C7.58172 20.0001 4 16.4183 4 12.0001H2ZM9.6662 2.22023C5.26441 3.28067 2 7.28497 2 12.0001H4C4 8.21991 6.62071 5.01114 10.1346 4.16461L9.6662 2.22023ZM12 4.11669C12 2.96755 10.9625 1.90794 9.6662 2.22023L10.1346 4.16461C10.1192 4.16832 10.0942 4.16956 10.067 4.16255C10.0418 4.15605 10.0249 4.14521 10.0156 4.1372C9.99871 4.12267 10 4.11242 10 4.11669H12ZM12 11.0001V4.11669H10V11.0001H12ZM13 12.0001C12.4477 12.0001 12 11.5523 12 11.0001H10C10 12.6569 11.3431 14.0001 13 14.0001V12.0001ZM19.8834 12.0001H13V14.0001H19.8834V12.0001ZM21.7798 14.3339C22.0921 13.0376 21.0325 12.0001 19.8834 12.0001V14.0001C19.8876 14.0001 19.8774 14.0014 19.8629 13.9845C19.8548 13.9751 19.844 13.9583 19.8375 13.933C19.8305 13.9058 19.8317 13.8808 19.8355 13.8654L21.7798 14.3339ZM12 22.0001C16.7151 22.0001 20.7194 18.7357 21.7798 14.3339L19.8355 13.8654C18.9889 17.3794 15.7802 20.0001 12 20.0001V22.0001ZM16 9.00006V4.00006H14V9.00006H16ZM20 8.00006H15V10.0001H20V8.00006ZM15 5.00006C16.2029 5.00006 17.1045 5.61127 17.785 6.48812C18.4794 7.38301 18.8764 8.48116 19.0194 9.19618L20.9806 8.80394C20.7902 7.85229 20.2873 6.45044 19.365 5.26199C18.4288 4.05552 16.9971 3.00006 15 3.00006V5.00006Z" fill="#69707F" /></svg>
                <div className={cn(classes.reports_text, classes.link_text)}>
                    отчеты
                </div>
            </CustomLink>
            <CustomLink route={route.path} to={'/stuff'} activeClassName={classes.active_link} className={cn(classes.stuff, classes.link)}>
                <svg className={classes.stuff_svg} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M17 5V6H19C20.6569 6 22 7.34315 22 9V12H17V11C17 10.4477 16.5523 10 16 10C15.4477 10 15 10.4477 15 11V12H9V11C9 10.4477 8.55228 10 8 10C7.44772 10 7 10.4477 7 11V12H2V9C2 7.34315 3.34315 6 5 6H7V5C7 3.34315 8.34315 2 10 2H14C15.6569 2 17 3.34315 17 5ZM15 15V14H9V15C9 15.5523 8.55228 16 8 16C7.44772 16 7 15.5523 7 15V14H2V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V14H17V15C17 15.5523 16.5523 16 16 16C15.4477 16 15 15.5523 15 15ZM11 4C10.4477 4 10 4.44772 10 5V6H14V5C14 4.44772 13.5523 4 13 4H11Z" fill="#69707F" /></svg>
                <div className={cn(classes.stuff_text, classes.link_text)}>сотрудники</div>
            </CustomLink>
            <CustomLink route={route.path} to={'/clients'} activeClassName={classes.active_link} className={cn(classes.clients, classes.link)}>
                <svg className={classes.clients_svg} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M3 9C3 5.68629 5.68629 3 9 3C12.3137 3 15 5.68629 15 9C15 10.9443 14.0752 12.6725 12.6415 13.769C15.1863 14.9067 17 17.2079 17 20C17 20.5523 16.5523 21 16 21H2C1.44772 21 1 20.5523 1 20C1 17.2079 2.81374 14.9067 5.35847 13.769C3.92478 12.6725 3 10.9443 3 9ZM22 21H18C18.5523 21 19 20.5523 19 20C19 17.2079 17.1863 14.9067 14.6415 13.769C16.0752 12.6725 17 10.9443 17 9C17 6.38756 15.3304 4.16508 13 3.34141C13.6256 3.12031 14.2987 3 15 3C18.3137 3 21 5.68629 21 9C21 10.9443 20.0752 12.6725 18.6415 13.769C21.1863 14.9067 23 17.2079 23 20C23 20.5523 22.5523 21 22 21Z" fill="#69707F" /></svg>
                <div className={cn(classes.clients_text, classes.link_text)}>клиенты</div>
            </CustomLink>
            <CustomLink route={route.path} to={'/settings'} activeClassName={classes.active_link} className={cn(classes.settings, classes.link)}>
                <svg className={classes.settings_svg} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M11 2C9.89543 2 9 2.89543 9 4V4.75733L8.29289 5.46444L9 4.75733L8.4645 4.22184C7.68346 3.44079 6.41712 3.44079 5.63608 4.22184L4.22186 5.63605C3.44081 6.4171 3.44081 7.68343 4.22186 8.46448L4.75739 9H4C2.89543 9 2 9.89543 2 11V13C2 14.1046 2.89543 15 4 15H4.75739L4.22185 15.5355C3.4408 16.3166 3.4408 17.5829 4.22185 18.364L5.63606 19.7782C6.41711 20.5592 7.68344 20.5592 8.46449 19.7782L7.75738 19.0711L8.46449 19.7782L9 19.2427V20C9 21.1046 9.89543 22 11 22H13C14.1046 22 15 21.1046 15 20V19.2426L15.5356 19.7782C16.3166 20.5592 17.583 20.5592 18.364 19.7782L19.7782 18.364C20.5593 17.5829 20.5593 16.3166 19.7782 15.5355L19.2427 15H20C21.1046 15 22 14.1046 22 13V11C22 9.89543 21.1046 9 20 9L19.2427 9L19.7782 8.46447C20.5592 7.68343 20.5592 6.4171 19.7782 5.63605L18.364 4.22183C17.5829 3.44078 16.3166 3.44078 15.5356 4.22183L15 4.75739V4C15 2.89543 14.1046 2 13 2H11ZM16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" fill="#69707F" /></svg>
                <div className={cn(classes.settings_text, classes.link_text)}>настройки</div>
            </CustomLink>
            <div onClick={handleExitCRM} className={classes.exit}>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.9999 8.66679C9.63125 8.66679 9.33328 8.96549 9.33328 9.33341V12.0001C9.33328 12.3674 9.03457 12.6668 8.66654 12.6668H6.66656V2.66685C6.66656 2.09751 6.30389 1.58885 5.75861 1.39952L5.56122 1.33348H8.66654C9.03457 1.33348 9.33328 1.6328 9.33328 2.00023V4.00021C9.33328 4.36812 9.63125 4.66683 9.9999 4.66683C10.3685 4.66683 10.6665 4.36812 10.6665 4.00021V2.00023C10.6665 0.897575 9.76919 0.000244141 8.66654 0.000244141H1.49998C1.47459 0.000244141 1.45335 0.0115966 1.4287 0.0148924C1.39659 0.0122069 1.36595 0.000244141 1.33336 0.000244141C0.598016 0.000244141 0 0.598139 0 1.33348V13.3334C0 13.9027 0.362667 14.4114 0.907949 14.6007L4.91999 15.9381C5.05598 15.9801 5.19123 16.0001 5.33332 16.0001C6.06866 16.0001 6.66656 15.4021 6.66656 14.6667V14.0001H8.66654C9.76919 14.0001 10.6665 13.1028 10.6665 12.0001V9.33341C10.6665 8.96549 10.3685 8.66679 9.9999 8.66679Z" fill="#8796B4" /><path d="M15.804 6.19536L13.1373 3.52876C12.9467 3.33809 12.66 3.28072 12.4107 3.38399C12.1621 3.48738 11.9994 3.73067 11.9994 4.00007V6.00005H9.33276C8.96472 6.00005 8.66602 6.29863 8.66602 6.66667C8.66602 7.03471 8.96472 7.33329 9.33276 7.33329H11.9994V9.33327C11.9994 9.60268 12.1621 9.84596 12.4107 9.94935C12.66 10.0526 12.9467 9.99525 13.1373 9.8047L15.804 7.13798C16.0646 6.87736 16.0646 6.45598 15.804 6.19536Z" fill="#8796B4" /></svg>
            </div>
        </div>
    );
};
